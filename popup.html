<script language="javascript">
var bg = chrome.extension.getBackgroundPage();

chrome.tabs.getSelected(null,function(tab){
	chrome.extension.sendRequest({msg: "get",tab: tab.id}, function(response){
		var info = response.info;
		var html = '';
		
		if (!info)
		{
			html = '<em>No framework detected</em>';
		}
		else
		{
			var appinfo = bg.appinfo;
		
			for (var i = 0;i < info.length;i++)
			{
				appid = info[i];
				app = appinfo[appid] ? appinfo[appid] : {};
				
				// i'm lazy
				if (!app.title) app.title = appid;
				
				bg.dd(app);
				if (!app.url) app.url = appinfo[''].url.replace('%s',appid);
				if (!app.icon) app.icon = appinfo[''].icon;
			
				html += '<a target="_blank" title="' + app.title + '" href="' + app.url + '">';
				html += '<img alt="' + app.title + '" width=16 height=16 src="apps/' + app.icon + '"/>';
				html += '</a>';
				
				// space
				html += ' ';
			}
		}
		
		document.getElementById('app_list').innerHTML = html;
	});
});
</script>
<div id="app_list" style="width: 200px;">
	loading ...
</div>