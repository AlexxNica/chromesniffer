<html><head><script>var showButton = function(tabId,changeInfo,tab){	// do not show for chrome page	if (changeInfo.status != 'complete' && (!chrome.url || /chrome:\/\//i.test(changeInfo.url)))		return;		chrome.pageAction.show(tabId);}var apps = {};chrome.tabs.onUpdated.addListener(showButton);chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {	if (request.msg == 'sniff') {		apps[sender.tab.id] = request.apps;		sendResponse({});	} else if (request.msg == 'get') {		var current_apps = apps[request.tab];			sendResponse({apps: current_apps});	}});// @todo: free object</script></head><body></body></html>